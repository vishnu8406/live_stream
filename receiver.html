<!DOCTYPE html>
<html>
<head>
  <title>Camera Receiver</title>
</head>
<body>
  <h2>Camera Receiver</h2>
  <video id="remoteVideo" autoplay playsinline></video>

  <script>
    console.log("Receiver page loaded");

    async function init() {
      try {
        let pc = new RTCPeerConnection({
          iceServers: [{ urls: "stun:stun.l.google.com:19302" }]
        });

        // Debugging
        pc.onconnectionstatechange = () => {
          console.log("Receiver connection state:", pc.connectionState);
        };
        pc.oniceconnectionstatechange = () => {
          console.log("Receiver ICE state:", pc.iceConnectionState);
        };

        pc.ontrack = event => {
          console.log("Track received:", event.streams);
          document.getElementById("remoteVideo").srcObject = event.streams[0];
        };

        // Normally signaling code with Firebase goes here
        console.log("Receiver ready. Waiting for sender.");
      } catch (err) {
        console.error("Error in receiver:", err);
      }
    }

    init();
  </script>
</body>
</html>
